<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ScotiaNova Mobile Banking</title>
    <meta name="description" content="ScotiaNOva Mobile">
    <script type="module" src="https://cdn.jsdelivr.net/npm/@ionic/core/dist/ionic/ionic.esm.js"></script>
    <script nomodule src="https://cdn.jsdelivr.net/npm/@ionic/core/dist/ionic/ionic.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@ionic/core/css/ionic.bundle.css" />
    <style>
      :root {
        --ion-safe-area-top: 20px;
        --ion-safe-area-bottom: 22px;
      }
      :host(.tab-selected) {
        color: #2dd36f !important;
      }
    </style>
  </head>
  <body>
    <ion-app>
      <ion-tabs>
        <ion-tab tab="music">
          <ion-header translucent>
            <ion-toolbar>
              <ion-title><img src="../images/logo.svg"></ion-title>
            </ion-toolbar>
          </ion-header>

          <ion-content fullscreen class="ion-padding">
            <?php
              // Database connection setup
              $servername = "localhost";
              $username = "root";
              $password = "";
              $dbname = "fucu_database";

              // Create connection
              $conn = new mysqli($servername, $username, $password, $dbname);

              // Check connection
              if ($conn->connect_error) {
                  die("Connection failed: " . $conn->connect_error);
              }

              // Query to fetch user data (example for user ID 1)
              $userId = 1; // Replace with dynamic user ID if needed
              $sql = "SELECT name, balance FROM users WHERE id = $userId";
              $result = $conn->query($sql);

              if ($result->num_rows > 0) {
                  // Output data of each row
                  while($row = $result->fetch_assoc()) {
                      $userName = $row['name'];
                      $userBalance = $row['balance'];
                  }
              } else {
                  $userName = "Unknown User";
                  $userBalance = "0.00";
              }

              $conn->close();
            ?>

            <ion-card>
              <ion-card-header>
                <ion-card-subtitle>Account Holder</ion-card-subtitle>
                <ion-card-title><?php echo $userName; ?></ion-card-title>
              </ion-card-header>
              <ion-card-content>
                Welcome to ScotiaNova Mobile Banking.
              </ion-card-content>
            </ion-card>

            <ion-card>
              <ion-card-header>
                <ion-card-subtitle>Total Balance</ion-card-subtitle>
                <ion-card-title>$<?php echo number_format($userBalance, 2); ?></ion-card-title>
              </ion-card-header>
              <ion-card-content>
                Your current account balance.
              </ion-card-content>
            </ion-card>

          </ion-content>
        </ion-tab>

        <ion-tab-bar slot="bottom">
          <ion-tab-button tab="music">
            <ion-label>Account</ion-label>
            <ion-icon name="wallet-outline"></ion-icon>
          </ion-tab-button>
          <ion-tab-button tab="movies">
            <ion-label>Transfers</ion-label>
            <ion-icon name="add"></ion-icon>
          </ion-tab-button>
          <ion-tab-button tab="games">
            <ion-label>Profile</ion-label>
            <ion-icon name="newspaper-outline"></ion-icon>
          </ion-tab-button>
        </ion-tab-bar>
      </ion-tabs>
    </ion-app>
  </body>
</html>

